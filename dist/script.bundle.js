(()=>{var e={562:(e,t,r)=>{const{Transform:i}=r(413),[n]=Buffer.from("\r"),[o]=Buffer.from("\n"),s={escape:'"',headers:null,mapHeaders:({header:e})=>e,mapValues:({value:e})=>e,newline:"\n",quote:'"',raw:!1,separator:",",skipComments:!1,skipLines:null,maxRowBytes:Number.MAX_SAFE_INTEGER,strict:!1};class a extends i{constructor(e={}){super({objectMode:!0,highWaterMark:16}),Array.isArray(e)&&(e={headers:e});const t=Object.assign({},s,e);t.customNewline=t.newline!==s.newline;for(const e of["newline","quote","separator"])void 0!==t[e]&&([t[e]]=Buffer.from(t[e]));t.escape=(e||{}).escape?Buffer.from(t.escape)[0]:t.quote,this.state={empty:t.raw?Buffer.alloc(0):"",escaped:!1,first:!0,lineNumber:0,previousEnd:0,rowLength:0,quoted:!1},this._prev=null,!1===t.headers&&(t.strict=!1),(t.headers||!1===t.headers)&&(this.state.first=!1),this.options=t,this.headers=t.headers}parseCell(e,t,r){const{escape:i,quote:n}=this.options;e[t]===n&&e[r-1]===n&&(t++,r--);let o=t;for(let s=t;s<r;s++)e[s]===i&&s+1<r&&e[s+1]===n&&s++,o!==s&&(e[o]=e[s]),o++;return this.parseValue(e,t,o)}parseLine(e,t,r){const{customNewline:i,escape:o,mapHeaders:s,mapValues:a,quote:c,separator:u,skipComments:l,skipLines:f}=this.options;r--,!i&&e.length&&e[r-1]===n&&r--;const h=u,p=[];let d=!1,y=t;if(l){const r="string"==typeof l?l:"#";if(e[t]===Buffer.from(r)[0])return}const v=e=>{if(this.state.first)return e;const t=p.length,r=this.headers[t];return a({header:r,index:t,value:e})};for(let i=t;i<r;i++){const t=!d&&e[i]===c,n=d&&e[i]===c&&i+1<=r&&e[i+1]===h,s=d&&e[i]===o&&i+1<r&&e[i+1]===c;if(t||n)d=!d;else if(s)i++;else if(e[i]===h&&!d){let t=this.parseCell(e,y,i);t=v(t),p.push(t),y=i+1}}if(y<r){let t=this.parseCell(e,y,r);t=v(t),p.push(t)}e[r-1]===h&&p.push(v(this.state.empty));const m=f&&f>this.state.lineNumber;if(this.state.lineNumber++,this.state.first&&!m)return this.state.first=!1,this.headers=p.map(((e,t)=>s({header:e,index:t}))),void this.emit("headers",this.headers);if(!m&&this.options.strict&&p.length!==this.headers.length){const e=new RangeError("Row length does not match headers");this.emit("error",e)}else m||this.writeRow(p)}parseValue(e,t,r){return this.options.raw?e.slice(t,r):e.toString("utf-8",t,r)}writeRow(e){const t=!1===this.headers?e.map(((e,t)=>t)):this.headers,r=e.reduce(((e,r,i)=>{const n=t[i];return null===n||(void 0!==n?e[n]=r:e[`_${i}`]=r),e}),{});this.push(r)}_flush(e){if(this.state.escaped||!this._prev)return e();this.parseLine(this._prev,this.state.previousEnd,this._prev.length+1),e()}_transform(e,t,r){"string"==typeof e&&(e=Buffer.from(e));const{escape:i,quote:s}=this.options;let a=0,c=e;this._prev&&(a=this._prev.length,c=Buffer.concat([this._prev,e]),this._prev=null);const u=c.length;for(let e=a;e<u;e++){const t=c[e],l=e+1<u?c[e+1]:null;if(this.state.rowLength++,this.state.rowLength>this.options.maxRowBytes)return r(new Error("Row exceeds the maximum size"));this.state.escaped||t!==i||l!==s||e===a?t!==s?this.state.quoted||(this.state.first&&!this.options.customNewline&&(t===o?this.options.newline=o:t===n&&l!==o&&(this.options.newline=n)),t===this.options.newline&&(this.parseLine(c,this.state.previousEnd,e+1),this.state.previousEnd=e+1,this.state.rowLength=0)):this.state.escaped?this.state.escaped=!1:this.state.quoted=!this.state.quoted:this.state.escaped=!0}return this.state.previousEnd===u?(this.state.previousEnd=0,r()):u-this.state.previousEnd<e.length?(this._prev=e,this.state.previousEnd-=u-e.length,r()):(this._prev=c,void r())}}e.exports=e=>new a(e)},538:(e,t,r)=>{"use strict";var i=r(426),n=r(56),o=new i.CsvStringifierFactory,s=new n.CsvWriterFactory(o);t.eD=function(e){return s.createObjectCsvWriter(e)}},426:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=r(106),n=r(96),o=r(554),s=function(){function e(){}return e.prototype.createArrayCsvStringifier=function(e){var t=n.createFieldStringifier(e.fieldDelimiter,e.alwaysQuote);return new i.ArrayCsvStringifier(t,e.recordDelimiter,e.header)},e.prototype.createObjectCsvStringifier=function(e){var t=n.createFieldStringifier(e.fieldDelimiter,e.alwaysQuote);return new o.ObjectCsvStringifier(t,e.header,e.recordDelimiter,e.headerIdDelimiter)},e}();t.CsvStringifierFactory=s},912:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=["\n","\r\n"],i=function(){function e(e,t){void 0===t&&(t="\n"),this.fieldStringifier=e,this.recordDelimiter=t,function(e){if(-1===r.indexOf(e))throw new Error("Invalid record delimiter `"+e+"` is specified")}(t)}return e.prototype.getHeaderString=function(){var e=this.getHeaderRecord();return e?this.joinRecords([this.getCsvLine(e)]):null},e.prototype.stringifyRecords=function(e){var t=this,r=Array.from(e,(function(e){return t.getCsvLine(t.getRecordAsArray(e))}));return this.joinRecords(r)},e.prototype.getCsvLine=function(e){var t=this;return e.map((function(e){return t.fieldStringifier.stringify(e)})).join(this.fieldStringifier.fieldDelimiter)},e.prototype.joinRecords=function(e){return e.join(this.recordDelimiter)+this.recordDelimiter},e}();t.CsvStringifier=i},106:function(e,t,r){"use strict";var i,n=this&&this.__extends||(i=function(e,t){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(e,t)},function(e,t){function r(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(t,"__esModule",{value:!0});var o=function(e){function t(t,r,i){var n=e.call(this,t,r)||this;return n.header=i,n}return n(t,e),t.prototype.getHeaderRecord=function(){return this.header},t.prototype.getRecordAsArray=function(e){return e},t}(r(912).CsvStringifier);t.ArrayCsvStringifier=o},554:function(e,t,r){"use strict";var i,n=this&&this.__extends||(i=function(e,t){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(e,t)},function(e,t){function r(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(t,"__esModule",{value:!0});var o=r(912),s=r(585),a=function(e){function t(t,r,i,n){var o=e.call(this,t,i)||this;return o.header=r,o.headerIdDelimiter=n,o}return n(t,e),t.prototype.getHeaderRecord=function(){return this.isObjectHeader?this.header.map((function(e){return e.title})):null},t.prototype.getRecordAsArray=function(e){var t=this;return this.fieldIds.map((function(r){return t.getNestedValue(e,r)}))},t.prototype.getNestedValue=function(e,t){return this.headerIdDelimiter?t.split(this.headerIdDelimiter).reduce((function(e,t){return(e||{})[t]}),e):e[t]},Object.defineProperty(t.prototype,"fieldIds",{get:function(){return this.isObjectHeader?this.header.map((function(e){return e.id})):this.header},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"isObjectHeader",{get:function(){return s.isObject(this.header&&this.header[0])},enumerable:!0,configurable:!0}),t}(o.CsvStringifier);t.ObjectCsvStringifier=a},56:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=r(598),n=function(){function e(e){this.csvStringifierFactory=e}return e.prototype.createArrayCsvWriter=function(e){var t=this.csvStringifierFactory.createArrayCsvStringifier({header:e.header,fieldDelimiter:e.fieldDelimiter,recordDelimiter:e.recordDelimiter,alwaysQuote:e.alwaysQuote});return new i.CsvWriter(t,e.path,e.encoding,e.append)},e.prototype.createObjectCsvWriter=function(e){var t=this.csvStringifierFactory.createObjectCsvStringifier({header:e.header,fieldDelimiter:e.fieldDelimiter,recordDelimiter:e.recordDelimiter,headerIdDelimiter:e.headerIdDelimiter,alwaysQuote:e.alwaysQuote});return new i.CsvWriter(t,e.path,e.encoding,e.append)},e}();t.CsvWriterFactory=n},598:function(e,t,r){"use strict";var i=this&&this.__awaiter||function(e,t,r,i){return new(r||(r=Promise))((function(n,o){function s(e){try{c(i.next(e))}catch(e){o(e)}}function a(e){try{c(i.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?n(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(s,a)}c((i=i.apply(e,t||[])).next())}))},n=this&&this.__generator||function(e,t){var r,i,n,o,s={label:0,sent:function(){if(1&n[0])throw n[1];return n[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(o){return function(a){return function(o){if(r)throw new TypeError("Generator is already executing.");for(;s;)try{if(r=1,i&&(n=2&o[0]?i.return:o[0]?i.throw||((n=i.return)&&n.call(i),0):i.next)&&!(n=n.call(i,o[1])).done)return n;switch(i=0,n&&(o=[2&o[0],n.value]),o[0]){case 0:case 1:n=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,i=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(!((n=(n=s.trys).length>0&&n[n.length-1])||6!==o[0]&&2!==o[0])){s=0;continue}if(3===o[0]&&(!n||o[1]>n[0]&&o[1]<n[3])){s.label=o[1];break}if(6===o[0]&&s.label<n[1]){s.label=n[1],n=o;break}if(n&&s.label<n[2]){s.label=n[2],s.ops.push(o);break}n[2]&&s.ops.pop(),s.trys.pop();continue}o=t.call(e,s)}catch(e){o=[6,e],i=0}finally{r=n=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,a])}}};Object.defineProperty(t,"__esModule",{value:!0});var o=r(582),s=function(){function e(e,t,r,i){void 0===i&&(i=!1),this.csvStringifier=e,this.append=i,this.fileWriter=new o.FileWriter(t,this.append,r)}return e.prototype.writeRecords=function(e){return i(this,void 0,void 0,(function(){var t,r;return n(this,(function(i){switch(i.label){case 0:return t=this.csvStringifier.stringifyRecords(e),r=this.headerString+t,[4,this.fileWriter.write(r)];case 1:return i.sent(),this.append=!0,[2]}}))}))},Object.defineProperty(e.prototype,"headerString",{get:function(){return!this.append&&this.csvStringifier.getHeaderString()||""},enumerable:!0,configurable:!0}),e}();t.CsvWriter=s},96:function(e,t){"use strict";var r,i=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(e,t)},function(e,t){function i(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)});Object.defineProperty(t,"__esModule",{value:!0});var n=[",",";"],o=function(){function e(e){this.fieldDelimiter=e}return e.prototype.isEmpty=function(e){return null==e||""===e},e.prototype.quoteField=function(e){return'"'+e.replace(/"/g,'""')+'"'},e}();t.FieldStringifier=o;var s=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return i(t,e),t.prototype.stringify=function(e){if(this.isEmpty(e))return"";var t=String(e);return this.needsQuote(t)?this.quoteField(t):t},t.prototype.needsQuote=function(e){return e.includes(this.fieldDelimiter)||e.includes("\n")||e.includes('"')},t}(o),a=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return i(t,e),t.prototype.stringify=function(e){return this.isEmpty(e)?"":this.quoteField(String(e))},t}(o);t.createFieldStringifier=function(e,t){return void 0===e&&(e=","),void 0===t&&(t=!1),function(e){if(-1===n.indexOf(e))throw new Error("Invalid field delimiter `"+e+"` is specified")}(e),t?new a(e):new s(e)}},582:function(e,t,r){"use strict";var i=this&&this.__awaiter||function(e,t,r,i){return new(r||(r=Promise))((function(n,o){function s(e){try{c(i.next(e))}catch(e){o(e)}}function a(e){try{c(i.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?n(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(s,a)}c((i=i.apply(e,t||[])).next())}))},n=this&&this.__generator||function(e,t){var r,i,n,o,s={label:0,sent:function(){if(1&n[0])throw n[1];return n[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(o){return function(a){return function(o){if(r)throw new TypeError("Generator is already executing.");for(;s;)try{if(r=1,i&&(n=2&o[0]?i.return:o[0]?i.throw||((n=i.return)&&n.call(i),0):i.next)&&!(n=n.call(i,o[1])).done)return n;switch(i=0,n&&(o=[2&o[0],n.value]),o[0]){case 0:case 1:n=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,i=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(!((n=(n=s.trys).length>0&&n[n.length-1])||6!==o[0]&&2!==o[0])){s=0;continue}if(3===o[0]&&(!n||o[1]>n[0]&&o[1]<n[3])){s.label=o[1];break}if(6===o[0]&&s.label<n[1]){s.label=n[1],n=o;break}if(n&&s.label<n[2]){s.label=n[2],s.ops.push(o);break}n[2]&&s.ops.pop(),s.trys.pop();continue}o=t.call(e,s)}catch(e){o=[6,e],i=0}finally{r=n=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,a])}}};Object.defineProperty(t,"__esModule",{value:!0});var o=r(918),s=r(747),a=o.promisify(s.writeFile),c=function(){function e(e,t,r){void 0===r&&(r="utf8"),this.path=e,this.append=t,this.encoding=r}return e.prototype.write=function(e){return i(this,void 0,void 0,(function(){return n(this,(function(t){switch(t.label){case 0:return[4,a(this.path,e,this.getWriteOption())];case 1:return t.sent(),this.append=!0,[2]}}))}))},e.prototype.getWriteOption=function(){return{encoding:this.encoding,flag:this.append?"a":"w"}},e}();t.FileWriter=c},585:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isObject=function(e){return"[object Object]"===Object.prototype.toString.call(e)}},918:function(e,t){"use strict";var r=this&&this.__spreadArrays||function(){for(var e=0,t=0,r=arguments.length;t<r;t++)e+=arguments[t].length;var i=Array(e),n=0;for(t=0;t<r;t++)for(var o=arguments[t],s=0,a=o.length;s<a;s++,n++)i[n]=o[s];return i};Object.defineProperty(t,"__esModule",{value:!0}),t.promisify=function(e){return function(){for(var t=[],i=0;i<arguments.length;i++)t[i]=arguments[i];return new Promise((function(i,n){e.apply(null,r(t,[function(e,t){e?n(e):i(t)}]))}))}}},223:(e,t,r)=>{const i=r(257),n=e=>e.replace(/\s+/g," ").trim(),o=({date:e,amount:t,desc:r,multiplier:i})=>(o,s)=>{const a={};return Object.keys(o).forEach((s=>{switch(Number(s)){case e:a.PostDate=n(o[s]);break;case t:a.Amount=(c=o[s],Number(c.replace(/[^0-9.-]+/g,""))*i);break;case r:a.Description=n(o[s]);break;default:return null}var c})),{...a,FileName:s}};e.exports=e=>(e=e.toUpperCase()).includes("BESTBUY")?{headers:!1,handler:o({date:0,amount:1,desc:2,multiplier:i.BESTBUY})}:e.includes("CHASE")?{headers:!0,handler:o({date:1,amount:5,desc:2,multiplier:i.CHASE})}:e.includes("COSTCO")?{headers:!0,handler:o({date:1,amount:3,desc:2,multiplier:i.COSTCO})}:e.includes("DISCOVER")?{headers:!0,handler:o({date:1,amount:3,desc:2,multiplier:i.DISCOVER})}:e.includes("PNC")?{headers:!0,handler:o({date:0,amount:2,desc:1,multiplier:i.PNC})}:e.includes("WELLSFARGO")?{headers:!1,handler:o({date:0,amount:1,desc:4,multiplier:i.WELLSFARGO})}:null},33:(e,t,r)=>{const i=r(747),n=r(614).EventEmitter;e.exports=e=>{const t=new n,r=[];return i.readdir(e,((e,i)=>{if(e)throw e;i.forEach((e=>r.push(e))),t.emit("done")})),new Promise(((e,i)=>{t.on("done",(()=>e(r))),t.on("error",i)}))}},21:(e,t,r)=>{const i=r(227),n=r(33);e.exports=async e=>{console.log(`👋👋👋 Reading all csv files from the ${e} folder.\n`);const t=await n(e),r=t.indexOf(".DS_Store");r>-1&&t.splice(r,1),console.log(`Found ${t.length} files:`),console.log(`${t.toString()}\n`);const o=await i(e,t);return console.log("\n✅✅✅ Done parsing all files.\n"),o}},257:e=>{e.exports={PNC:1,COSTCO:1,BESTBUY:1,DISCOVER:1,WELLSFARGO:-1,CHASE:-1}},227:(e,t,r)=>{const i=r(747),n=r(562),o=r(223);e.exports=async(e,t)=>await Promise.all(t.map((async t=>{console.log(`Parsing ${e}/${t}...`);let r=await((e,t,r)=>{const o=[],{headers:s,handler:a}=r,c=i.createReadStream(`${e}/${t}`).pipe(n({headers:!1,skipLines:Number(s)}));return c.on("data",(e=>o.push(a(e,t)))),new Promise(((e,t)=>{c.on("end",(()=>e(o))),c.on("error",t)}))})(e,t,o(t));return r=r.filter((e=>e.Amount>0)),r.sort(((e,t)=>new Date(e.PostDate)-new Date(t.PostDate))),[...r,{}]})))},625:(e,t,r)=>{const i=r(747),n=r(538).eD;e.exports=(e,t)=>{i.existsSync(t)||i.mkdirSync(t);const r=n({path:`${t}/merged.csv`,header:[{id:"PostDate",title:"PostDate"},{id:"Description",title:"Description"},{id:"Amount",title:"Amount"},{id:"FileName",title:"FileName"}]});console.log(`writing data to merged.csv in the ${t} directory.\n`),r.writeRecords(e)}},614:e=>{"use strict";e.exports=require("events")},747:e=>{"use strict";e.exports=require("fs")},413:e=>{"use strict";e.exports=require("stream")}},t={};function r(i){if(t[i])return t[i].exports;var n=t[i]={exports:{}};return e[i].call(n.exports,n,n.exports,r),n.exports}(()=>{const e=r(21),t=r(625);(async()=>{console.time();try{const r="/Users/ahmedkhan/Downloads",i="data",n="bin",o=await e(`${r}/${i}`),s=[].concat.apply([],o);t(s,`${r}/${n}`),console.log("Success! 🥳🥳🥳\n"),console.timeEnd(),console.log("\nExiting...\n")}catch(e){console.log("An error occurred 😞😞😞\n"),console.timeEnd(),console.log("\nExiting...\n")}})()})()})();